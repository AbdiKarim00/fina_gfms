{"version":3,"file":"LoginPage-CA54PiTC.js","sources":["../../src/pages/LoginPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Form, Input, Button, Alert, Card, Typography, Space } from 'antd';\nimport { UserOutlined, LockOutlined, SafetyOutlined } from '@ant-design/icons';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst { Title, Text } = Typography;\n\nexport const LoginPage: React.FC = () => {\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [form] = Form.useForm();\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (values: { personal_number: string; password: string }) => {\n    setError('');\n    setLoading(true);\n\n    try {\n      const result = await login(values);\n      // Navigate to OTP verification page with user_id and channel\n      navigate('/verify-otp', {\n        state: {\n          userId: result.user_id,\n          otpChannel: result.otp_channel,\n          message: result.message,\n        },\n      });\n    } catch (err: any) {\n      console.error('Login error:', err);\n      console.error('Response:', err.response);\n      const errorMessage = err.response?.data?.message || err.message || 'Login failed. Please try again.';\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center py-12 px-4\" style={{ background: 'linear-gradient(135deg, #E8F5E9 0%, #FFFFFF 50%, #F1F8E9 100%)' }}>\n      <div style={{ maxWidth: 450, width: '100%' }}>\n        {/* Logo/Header Section */}\n        <Space direction=\"vertical\" size=\"large\" style={{ width: '100%', marginBottom: 32 }} align=\"center\">\n          <div style={{ \n            width: 80, \n            height: 80, \n            background: 'linear-gradient(135deg, #006600 0%, #009900 100%)',\n            borderRadius: 16,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            boxShadow: '0 4px 12px rgba(0, 102, 0, 0.2)'\n          }}>\n            <SafetyOutlined style={{ fontSize: 48, color: '#FFFFFF' }} />\n          </div>\n          <Space direction=\"vertical\" size={4} align=\"center\">\n            <Title level={2} style={{ margin: 0, color: '#000000' }}>GFMS</Title>\n            <Text type=\"secondary\" style={{ fontSize: 14 }}>Kenya Government Fleet Management System</Text>\n          </Space>\n        </Space>\n\n        {/* Login Card */}\n        <Card \n          style={{ \n            borderRadius: 16,\n            boxShadow: '0 4px 24px rgba(0, 0, 0, 0.08)'\n          }}\n        >\n          <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\n            <Title level={4} style={{ margin: 0 }}>Sign in to your account</Title>\n            \n            {error && (\n              <Alert\n                message={error}\n                type=\"error\"\n                showIcon\n                closable\n                onClose={() => setError('')}\n              />\n            )}\n\n            <Form\n              form={form}\n              name=\"login\"\n              onFinish={handleSubmit}\n              layout=\"vertical\"\n              size=\"large\"\n              requiredMark={false}\n            >\n              <Form.Item\n                label=\"Personal Number\"\n                name=\"personal_number\"\n                rules={[\n                  { required: true, message: 'Please enter your personal number' },\n                  { pattern: /^\\d+$/, message: 'Personal number must contain only digits' }\n                ]}\n              >\n                <Input\n                  prefix={<UserOutlined style={{ color: 'rgba(0,0,0,0.25)' }} />}\n                  placeholder=\"123456\"\n                  autoComplete=\"username\"\n                />\n              </Form.Item>\n\n              <Form.Item\n                label=\"Password\"\n                name=\"password\"\n                rules={[\n                  { required: true, message: 'Please enter your password' },\n                  { min: 8, message: 'Password must be at least 8 characters' }\n                ]}\n              >\n                <Input.Password\n                  prefix={<LockOutlined style={{ color: 'rgba(0,0,0,0.25)' }} />}\n                  placeholder=\"••••••••\"\n                  autoComplete=\"current-password\"\n                />\n              </Form.Item>\n\n              <Form.Item style={{ marginBottom: 0 }}>\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  loading={loading}\n                  block\n                  size=\"large\"\n                  style={{ height: 48, fontWeight: 600 }}\n                >\n                  {loading ? 'Signing in...' : 'Sign in'}\n                </Button>\n              </Form.Item>\n            </Form>\n\n            {/* Demo Credentials */}\n            <Alert\n              message={\n                <Space size=\"small\">\n                  <Text strong>Demo:</Text>\n                  <Text code>123456</Text>\n                  <Text type=\"secondary\">/</Text>\n                  <Text code>password</Text>\n                </Space>\n              }\n              type=\"info\"\n              showIcon\n            />\n          </Space>\n        </Card>\n\n        {/* Footer */}\n        <div style={{ marginTop: 24, textAlign: 'center' }}>\n          <Text type=\"secondary\" style={{ fontSize: 12 }}>\n            © 2025 Kenya Government. All rights reserved.\n          </Text>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":["Title","Text","Typography","LoginPage","error","setError","useState","loading","setLoading","form","Form","login","useAuth","navigate","useNavigate","handleSubmit","values","result","err","errorMessage","_b","_a","jsxs","Space","jsx","SafetyOutlined","Card","Alert","Input","UserOutlined","LockOutlined","Button"],"mappings":"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"}