import{j as e,a as te}from"./index-C5ym5WiK.js";import{d as X,g as ee,a as B}from"./react-vendor-DBKCBwX6.js";import{_ as Y,B as V,o as Z,S as f,u as re,T as he,$ as ye,v as ce,a as de,j as ne,a0 as Ce,a1 as Re,d as Be,Y as ae,r as L,Z as me,O as pe,a2 as xe,s as ge,I as fe,a3 as Ye,y as ie,z as F,p as je,t as k,a4 as Pe,m as Ie,a5 as ze,b as Ae,N as se,P as le,W as be,E as ue,l as De}from"./antd-vendor-CNWCwjIv.js";import{u as Te}from"./usePermissions-CttDvXO0.js";var ve={exports:{}};(function(t,C){(function(c,i){t.exports=i()})(X,function(){return function(c,i,h){c=c||{};var d=i.prototype,w={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(l,a,j,g){return d.fromToBase(l,a,j,g)}h.en.relativeTime=w,d.fromToBase=function(l,a,j,g,b){for(var D,P,T,v=j.$locale().relativeTime||w,O=c.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],M=O.length,m=0;m<M;m+=1){var I=O[m];I.d&&(D=g?h(l).diff(j,I.d,!0):j.diff(l,I.d,!0));var o=(c.rounding||Math.round)(Math.abs(D));if(T=D>0,o<=I.r||!I.r){o<=1&&m>0&&(I=O[m-1]);var r=v[I.l];b&&(o=b(""+o)),P=typeof r=="string"?r.replace("%d",o):r(o,a,I.l,T);break}}if(a)return P;var s=T?v.future:v.past;return typeof s=="function"?s(P):s.replace("%s",P)},d.to=function(l,a){return u(l,a,this,!0)},d.from=function(l,a){return u(l,a,this)};var n=function(l){return l.$u?h.utc():h()};d.toNow=function(l){return this.to(n(this),l)},d.fromNow=function(l){return this.from(n(this),l)}}})})(ve);var ke=ve.exports;const Oe=ee(ke);var $e={exports:{}};(function(t,C){(function(c,i){t.exports=i()})(X,function(){var c,i,h=1e3,d=6e4,w=36e5,u=864e5,n=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=31536e6,a=2628e6,j=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,g={years:l,months:a,days:u,hours:w,minutes:d,seconds:h,milliseconds:1,weeks:6048e5},b=function(o){return o instanceof m},D=function(o,r,s){return new m(o,s,r.$l)},P=function(o){return i.p(o)+"s"},T=function(o){return o<0},v=function(o){return T(o)?Math.ceil(o):Math.floor(o)},O=function(o){return Math.abs(o)},M=function(o,r){return o?T(o)?{negative:!0,format:""+O(o)+r}:{negative:!1,format:""+o+r}:{negative:!1,format:""}},m=function(){function o(s,p,$){var y=this;if(this.$d={},this.$l=$,s===void 0&&(this.$ms=0,this.parseFromMilliseconds()),p)return D(s*g[P(p)],this);if(typeof s=="number")return this.$ms=s,this.parseFromMilliseconds(),this;if(typeof s=="object")return Object.keys(s).forEach(function(_){y.$d[P(_)]=s[_]}),this.calMilliseconds(),this;if(typeof s=="string"){var R=s.match(j);if(R){var z=R.slice(2).map(function(_){return _!=null?Number(_):0});return this.$d.years=z[0],this.$d.months=z[1],this.$d.weeks=z[2],this.$d.days=z[3],this.$d.hours=z[4],this.$d.minutes=z[5],this.$d.seconds=z[6],this.calMilliseconds(),this}}return this}var r=o.prototype;return r.calMilliseconds=function(){var s=this;this.$ms=Object.keys(this.$d).reduce(function(p,$){return p+(s.$d[$]||0)*g[$]},0)},r.parseFromMilliseconds=function(){var s=this.$ms;this.$d.years=v(s/l),s%=l,this.$d.months=v(s/a),s%=a,this.$d.days=v(s/u),s%=u,this.$d.hours=v(s/w),s%=w,this.$d.minutes=v(s/d),s%=d,this.$d.seconds=v(s/h),s%=h,this.$d.milliseconds=s},r.toISOString=function(){var s=M(this.$d.years,"Y"),p=M(this.$d.months,"M"),$=+this.$d.days||0;this.$d.weeks&&($+=7*this.$d.weeks);var y=M($,"D"),R=M(this.$d.hours,"H"),z=M(this.$d.minutes,"M"),_=this.$d.seconds||0;this.$d.milliseconds&&(_+=this.$d.milliseconds/1e3,_=Math.round(1e3*_)/1e3);var K=M(_,"S"),oe=s.negative||p.negative||y.negative||R.negative||z.negative||K.negative,x=R.format||z.format||K.format?"T":"",S=(oe?"-":"")+"P"+s.format+p.format+y.format+x+R.format+z.format+K.format;return S==="P"||S==="-P"?"P0D":S},r.toJSON=function(){return this.toISOString()},r.format=function(s){var p=s||"YYYY-MM-DDTHH:mm:ss",$={Y:this.$d.years,YY:i.s(this.$d.years,2,"0"),YYYY:i.s(this.$d.years,4,"0"),M:this.$d.months,MM:i.s(this.$d.months,2,"0"),D:this.$d.days,DD:i.s(this.$d.days,2,"0"),H:this.$d.hours,HH:i.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:i.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:i.s(this.$d.seconds,2,"0"),SSS:i.s(this.$d.milliseconds,3,"0")};return p.replace(n,function(y,R){return R||String($[y])})},r.as=function(s){return this.$ms/g[P(s)]},r.get=function(s){var p=this.$ms,$=P(s);return $==="milliseconds"?p%=1e3:p=$==="weeks"?v(p/g[$]):this.$d[$],p||0},r.add=function(s,p,$){var y;return y=p?s*g[P(p)]:b(s)?s.$ms:D(s,this).$ms,D(this.$ms+y*($?-1:1),this)},r.subtract=function(s,p){return this.add(s,p,!0)},r.locale=function(s){var p=this.clone();return p.$l=s,p},r.clone=function(){return D(this.$ms,this)},r.humanize=function(s){return c().add(this.$ms,"ms").locale(this.$l).fromNow(!s)},r.valueOf=function(){return this.asMilliseconds()},r.milliseconds=function(){return this.get("milliseconds")},r.asMilliseconds=function(){return this.as("milliseconds")},r.seconds=function(){return this.get("seconds")},r.asSeconds=function(){return this.as("seconds")},r.minutes=function(){return this.get("minutes")},r.asMinutes=function(){return this.as("minutes")},r.hours=function(){return this.get("hours")},r.asHours=function(){return this.as("hours")},r.days=function(){return this.get("days")},r.asDays=function(){return this.as("days")},r.weeks=function(){return this.get("weeks")},r.asWeeks=function(){return this.as("weeks")},r.months=function(){return this.get("months")},r.asMonths=function(){return this.as("months")},r.years=function(){return this.get("years")},r.asYears=function(){return this.as("years")},o}(),I=function(o,r,s){return o.add(r.years()*s,"y").add(r.months()*s,"M").add(r.days()*s,"d").add(r.hours()*s,"h").add(r.minutes()*s,"m").add(r.seconds()*s,"s").add(r.milliseconds()*s,"ms")};return function(o,r,s){c=s,i=s().$utils(),s.duration=function(y,R){var z=s.locale();return D(y,{$l:z},R)},s.isDuration=b;var p=r.prototype.add,$=r.prototype.subtract;r.prototype.add=function(y,R){return b(y)?I(this,y,1):p.bind(this)(y,R)},r.prototype.subtract=function(y,R){return b(y)?I(this,y,-1):$.bind(this)(y,R)}}})})($e);var He=$e.exports;const _e=ee(He);var we={exports:{}};(function(t,C){(function(c,i){t.exports=i()})(X,function(){return function(c,i,h){i.prototype.isBetween=function(d,w,u,n){var l=h(d),a=h(w),j=(n=n||"()")[0]==="(",g=n[1]===")";return(j?this.isAfter(l,u):!this.isBefore(l,u))&&(g?this.isBefore(a,u):!this.isAfter(a,u))||(j?this.isBefore(l,u):!this.isAfter(l,u))&&(g?this.isAfter(a,u):!this.isBefore(a,u))}}})})(we);var Le=we.exports;const Ne=ee(Le);var Se={exports:{}};(function(t,C){(function(c,i){t.exports=i()})(X,function(){return function(c,i){i.prototype.isSameOrAfter=function(h,d){return this.isSame(h,d)||this.isAfter(h,d)}}})})(Se);var Ee=Se.exports;const Fe=ee(Ee);var Me={exports:{}};(function(t,C){(function(c,i){t.exports=i()})(X,function(){return function(c,i){i.prototype.isSameOrBefore=function(h,d){return this.isSame(h,d)||this.isBefore(h,d)}}})})(Me);var Ue=Me.exports;const qe=ee(Ue);Y.extend(Oe);Y.extend(_e);Y.extend(Ne);Y.extend(Fe);Y.extend(qe);const{Text:E,Paragraph:We}=he,{TextArea:Ve}=fe,Ze=({booking:t,onApprove:C,onReject:c,onViewDetails:i,canApprove:h})=>{var T,v,O,M;const[d,w]=B.useState(!1),[u,n]=B.useState(""),[l,a]=B.useState(!1),j=m=>{switch(m){case"pending":return"warning";case"approved":return"success";case"rejected":return"error";case"completed":return"default";case"cancelled":return"default";default:return"default"}},g=m=>{switch(m){case"high":return"red";case"medium":return"orange";case"low":return"blue";default:return"default"}},b=async()=>{a(!0),await C(t.id),a(!1)},D=async()=>{u.trim()&&(a(!0),await c(t.id,u),a(!1),w(!1),n(""))},P=Y(t.end_date).diff(Y(t.start_date),"hour");return e.jsxs(e.Fragment,{children:[e.jsx(V.Ribbon,{text:t.priority.toUpperCase(),color:g(t.priority),children:e.jsx(Z,{hoverable:!0,style:{height:"100%"},actions:t.status==="pending"&&h?[e.jsx(ae,{title:"View Details",children:e.jsx(L,{type:"text",icon:e.jsx(me,{}),onClick:()=>i(t),children:"Details"})}),e.jsx(ae,{title:"Approve Booking",children:e.jsx(L,{type:"text",icon:e.jsx(pe,{}),onClick:b,loading:l,style:{color:"#52c41a"},children:"Approve"})}),e.jsx(ae,{title:"Reject Booking",children:e.jsx(L,{type:"text",danger:!0,icon:e.jsx(xe,{}),onClick:()=>w(!0),children:"Reject"})})]:[e.jsx(L,{type:"text",icon:e.jsx(me,{}),onClick:()=>i(t),children:"View Details"})],children:e.jsxs(f,{vertical:!0,size:"small",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(re,{color:j(t.status),children:t.status.toUpperCase()}),e.jsxs(E,{type:"secondary",style:{fontSize:"12px"},children:[e.jsx(ye,{})," ",Y(t.created_at).fromNow()]})]}),e.jsx(ce,{style:{margin:"8px 0"}}),e.jsxs(f,{children:[e.jsx(de,{style:{color:"#006600"}}),e.jsx(E,{strong:!0,children:((T=t.vehicle)==null?void 0:T.registration_number)||"N/A"}),e.jsxs(E,{type:"secondary",children:[(v=t.vehicle)==null?void 0:v.make," ",(O=t.vehicle)==null?void 0:O.model]})]}),e.jsxs(f,{children:[e.jsx(ne,{}),e.jsx(E,{children:((M=t.requester)==null?void 0:M.name)||"Unknown"})]}),e.jsxs(f,{children:[e.jsx(Ce,{style:{color:"#1890ff"}}),e.jsx(E,{strong:!0,children:t.destination})]}),e.jsxs(f,{vertical:!0,size:0,style:{width:"100%"},children:[e.jsxs(f,{children:[e.jsx(Re,{}),e.jsx(E,{type:"secondary",children:Y(t.start_date).format("MMM D, YYYY HH:mm")})]}),e.jsxs(E,{type:"secondary",style:{marginLeft:"24px"},children:["to ",Y(t.end_date).format("MMM D, YYYY HH:mm")]}),e.jsxs(E,{type:"secondary",style:{marginLeft:"24px",fontSize:"12px"},children:["(",P," hours)"]})]}),e.jsxs(f,{children:[e.jsx(Be,{}),e.jsxs(E,{children:[t.passengers," passenger",t.passengers>1?"s":""]})]}),e.jsx(ce,{style:{margin:"8px 0"}}),e.jsxs(We,{ellipsis:{rows:2,expandable:!1},style:{margin:0,fontSize:"13px"},children:[e.jsx(E,{type:"secondary",children:"Purpose:"})," ",t.purpose]})]})})}),e.jsx(ge,{title:"Reject Booking",open:d,onOk:D,onCancel:()=>{w(!1),n("")},okText:"Reject",okButtonProps:{danger:!0,disabled:!u.trim()},confirmLoading:l,children:e.jsxs(f,{vertical:!0,size:"middle",style:{width:"100%"},children:[e.jsx(E,{children:"Please provide a reason for rejecting this booking:"}),e.jsx(Ve,{rows:4,value:u,onChange:m=>n(m.target.value),placeholder:"Enter rejection reason (minimum 10 characters)...",maxLength:500,showCount:!0})]})})]})},Ge=({bookings:t,onApprove:C,onReject:c,onViewDetails:i,canApprove:h})=>t.length===0?e.jsx(Ye,{description:"No bookings found",style:{padding:"50px"}}):e.jsx(ie,{gutter:[16,16],children:t.map(d=>e.jsx(F,{xs:24,sm:24,md:12,lg:12,xl:8,xxl:8,children:e.jsx(Ze,{booking:d,onApprove:C,onReject:c,onViewDetails:i,canApprove:h})},d.id))}),{TextArea:Je}=fe,{Text:q}=he,Qe=({booking:t,open:C,onClose:c,onApprove:i,onReject:h,canApprove:d})=>{var v,O,M,m,I,o,r;const[w,u]=B.useState(!1),[n,l]=B.useState(""),[a,j]=B.useState(!1);if(!t)return null;const g=s=>{switch(s){case"pending":return"warning";case"approved":return"success";case"rejected":return"error";case"completed":return"default";case"cancelled":return"default";default:return"default"}},b=s=>{switch(s){case"high":return"red";case"medium":return"orange";case"low":return"blue";default:return"default"}},D=async()=>{j(!0),await i(t.id),j(!1),c()},P=async()=>{n.trim()&&(j(!0),await h(t.id,n),j(!1),u(!1),l(""),c())},T=Y(t.end_date).diff(Y(t.start_date),"hour");return e.jsx(ge,{title:e.jsxs(f,{children:[e.jsx(de,{style:{color:"#006600"}}),e.jsx("span",{children:"Booking Details"})]}),open:C,onCancel:c,width:800,footer:t.status==="pending"&&d?[e.jsx(L,{onClick:c,children:"Close"},"close"),e.jsx(L,{danger:!0,icon:e.jsx(xe,{}),onClick:()=>u(!0),children:"Reject"},"reject"),e.jsx(L,{type:"primary",icon:e.jsx(pe,{}),onClick:D,loading:a,children:"Approve"},"approve")]:[e.jsx(L,{onClick:c,children:"Close"},"close")],children:e.jsxs(f,{vertical:!0,size:"middle",style:{width:"100%"},children:[e.jsxs(f,{children:[e.jsx(re,{color:g(t.status),style:{fontSize:"14px"},children:t.status.toUpperCase()}),e.jsxs(re,{color:b(t.priority),style:{fontSize:"14px"},children:[t.priority.toUpperCase()," PRIORITY"]})]}),t.status==="rejected"&&t.rejection_reason&&e.jsx(je,{title:"Booking Rejected",description:t.rejection_reason,type:"error",showIcon:!0}),w&&e.jsx(je,{title:"Reject Booking",description:e.jsxs(f,{vertical:!0,style:{width:"100%",marginTop:"8px"},children:[e.jsx(q,{children:"Please provide a reason for rejecting this booking:"}),e.jsx(Je,{rows:4,value:n,onChange:s=>l(s.target.value),placeholder:"Enter rejection reason (minimum 10 characters)...",maxLength:500,showCount:!0}),e.jsxs(f,{children:[e.jsx(L,{type:"primary",danger:!0,onClick:P,disabled:!n.trim()||n.length<10,loading:a,children:"Confirm Rejection"}),e.jsx(L,{onClick:()=>u(!1),children:"Cancel"})]})]}),type:"warning",showIcon:!0}),e.jsx(ce,{}),e.jsxs(k,{bordered:!0,column:2,size:"small",children:[e.jsx(k.Item,{label:"Vehicle",span:2,children:e.jsxs(f,{children:[e.jsx(de,{style:{color:"#006600"}}),e.jsx(q,{strong:!0,children:((v=t.vehicle)==null?void 0:v.registration_number)||"N/A"}),e.jsxs(q,{type:"secondary",children:[(O=t.vehicle)==null?void 0:O.make," ",(M=t.vehicle)==null?void 0:M.model," (",(m=t.vehicle)==null?void 0:m.year,")"]})]})}),e.jsx(k.Item,{label:"Requester",span:2,children:e.jsxs(f,{children:[e.jsx(ne,{}),e.jsx(q,{children:((I=t.requester)==null?void 0:I.name)||"Unknown"}),e.jsxs(q,{type:"secondary",children:["(",(o=t.requester)==null?void 0:o.personal_number,")"]})]})}),t.driver&&e.jsx(k.Item,{label:"Assigned Driver",span:2,children:e.jsxs(f,{children:[e.jsx(ne,{}),e.jsx(q,{children:t.driver.name}),e.jsxs(q,{type:"secondary",children:["(",t.driver.personal_number,")"]})]})}),e.jsx(k.Item,{label:"Start Date",children:Y(t.start_date).format("MMM D, YYYY HH:mm")}),e.jsx(k.Item,{label:"End Date",children:Y(t.end_date).format("MMM D, YYYY HH:mm")}),e.jsxs(k.Item,{label:"Duration",span:2,children:[T," hours (",Math.floor(T/24)," days, ",T%24," hours)"]}),e.jsx(k.Item,{label:"Destination",span:2,children:t.destination}),e.jsxs(k.Item,{label:"Passengers",children:[t.passengers," passenger",t.passengers>1?"s":""]}),e.jsx(k.Item,{label:"Priority",children:e.jsx(re,{color:b(t.priority),children:t.priority.toUpperCase()})}),e.jsx(k.Item,{label:"Purpose",span:2,children:t.purpose}),t.notes&&e.jsx(k.Item,{label:"Notes",span:2,children:t.notes}),e.jsx(k.Item,{label:"Created At",children:Y(t.created_at).format("MMM D, YYYY HH:mm")}),e.jsx(k.Item,{label:"Requested",children:Y(t.created_at).fromNow()}),t.approved_by&&e.jsx(e.Fragment,{children:e.jsx(k.Item,{label:"Approved/Rejected By",span:2,children:e.jsxs(f,{children:[e.jsx(ne,{}),e.jsx(q,{children:((r=t.approver)==null?void 0:r.name)||"Unknown"}),e.jsxs(q,{type:"secondary",children:["on ",Y(t.approved_at).format("MMM D, YYYY HH:mm")]})]})})})]})]})})},Ke=({currentPage:t,totalItems:C,pageSize:c=12,onPageChange:i,showSizeChanger:h=!1,pageSizeOptions:d=["12","24","48","96"],...w})=>C<=c?null:e.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:"24px",padding:"16px 0"},children:e.jsx(Pe,{current:t,total:C,pageSize:c,onChange:i,showSizeChanger:h,pageSizeOptions:d,showTotal:(u,n)=>`${n[0]}-${n[1]} of ${u} items`,...w})}),{Title:Xe,Text:U}=he,{Option:W}=ue,nt=()=>{const{message:t}=Ie.useApp(),C=Te(),[c,i]=B.useState([]),[h,d]=B.useState(!0),[w,u]=B.useState(!1),[n,l]=B.useState({total:0,pending:0,approved:0,rejected:0}),[a,j]=B.useState({status:""}),[g,b]=B.useState(""),[D,P]=B.useState(null),[T,v]=B.useState(!1),[O,M]=B.useState(1),[m,I]=B.useState(12);B.useEffect(()=>{o(),r(),M(1)},[a]);const o=async()=>{var x,S,N;try{d(!0);const A=new URLSearchParams;a.status&&A.append("status",a.status),a.priority&&A.append("priority",a.priority);const H=await te.get(`/bookings?${A.toString()}`);i(H.data||[])}catch(A){let H="Unable to load bookings. Please try again.";((x=A.response)==null?void 0:x.status)===403?H="You don't have permission to view bookings. Please contact your administrator.":((S=A.response)==null?void 0:S.status)===500?H="Server error. Our team has been notified. Please try again later.":((N=A.response)==null?void 0:N.status)===404?H="Bookings service not found. Please contact support.":navigator.onLine||(H="No internet connection. Please check your network."),t.error(H)}finally{d(!1)}},r=async()=>{try{const x=await te.get("/bookings/statistics");l(x.data)}catch(x){console.error("Failed to fetch statistics:",x.message)}},s=async x=>{var S,N,A,H;try{await te.post(`/bookings/${x}/approve`),t.success("Booking approved successfully! ðŸŽ‰"),o(),r()}catch(J){let G="Unable to approve booking. Please try again.";if(((S=J.response)==null?void 0:S.status)===403)G="You don't have permission to approve bookings";else if(((N=J.response)==null?void 0:N.status)===400){const Q=(H=(A=J.response)==null?void 0:A.data)==null?void 0:H.message;Q&&(G=Q)}t.error(G,6)}},p=async(x,S)=>{var N,A,H,J;try{await te.post(`/bookings/${x}/reject`,{reason:S}),t.success("Booking rejected"),o(),r()}catch(G){let Q="Unable to reject booking. Please try again.";((N=G.response)==null?void 0:N.status)===403?Q="You don't have permission to reject bookings":((A=G.response)==null?void 0:A.status)===400&&(Q=((J=(H=G.response)==null?void 0:H.data)==null?void 0:J.message)||"This booking cannot be rejected"),t.error(Q,5)}},$=x=>{P(x),v(!0)},y=async()=>{u(!0),await Promise.all([o(),r()]),u(!1),t.success("Bookings refreshed")},R=c.filter(x=>{var N,A;if(!g)return!0;const S=g.toLowerCase();return x.destination.toLowerCase().includes(S)||x.purpose.toLowerCase().includes(S)||((N=x.vehicle)==null?void 0:N.registration_number.toLowerCase().includes(S))||((A=x.requester)==null?void 0:A.name.toLowerCase().includes(S))}),z=(O-1)*m,_=z+m,K=R.slice(z,_),oe=(x,S)=>{M(x),S!==m&&(I(S),M(1))};return C.canViewBookings?e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(f,{vertical:!0,size:"large",style:{width:"100%"},children:[e.jsxs(ie,{justify:"space-between",align:"middle",children:[e.jsxs(F,{children:[e.jsx(Xe,{level:2,style:{margin:0},children:"Vehicle Bookings"}),e.jsx(U,{type:"secondary",children:"Review and approve vehicle booking requests"})]}),e.jsx(F,{children:e.jsx(L,{icon:e.jsx(ze,{spin:w}),onClick:y,loading:w,children:"Refresh"})})]}),e.jsxs(ie,{gutter:[16,16],children:[e.jsx(F,{xs:24,sm:12,lg:6,children:e.jsx(Z,{hoverable:!0,style:{borderRadius:"12px"},children:e.jsxs(f,{vertical:!0,size:"small",style:{width:"100%"},children:[e.jsxs(f,{children:[e.jsx(Ae,{style:{fontSize:"24px",color:"#1890ff"}}),e.jsx(U,{strong:!0,style:{fontSize:"16px"},children:"Total Bookings"})]}),e.jsx(se,{value:n.total,styles:{content:{color:"#1890ff",fontSize:"32px",fontWeight:"bold"}}}),e.jsx(U,{type:"secondary",style:{fontSize:"12px"},children:"All booking requests"})]})})}),e.jsx(F,{xs:24,sm:12,lg:6,children:e.jsx(Z,{hoverable:!0,style:{borderRadius:"12px"},children:e.jsxs(f,{vertical:!0,size:"small",style:{width:"100%"},children:[e.jsxs(f,{children:[e.jsx(ye,{style:{fontSize:"24px",color:"#faad14"}}),e.jsx(U,{strong:!0,style:{fontSize:"16px"},children:"Pending"})]}),e.jsx(se,{value:n.pending,styles:{content:{color:"#faad14",fontSize:"32px",fontWeight:"bold"}}}),e.jsxs("div",{children:[e.jsx(le,{percent:n.total>0?Math.round(n.pending/n.total*100):0,strokeColor:"#faad14",showInfo:!1,size:"small"}),e.jsx(U,{type:"secondary",style:{fontSize:"12px"},children:n.total>0?`${Math.round(n.pending/n.total*100)}% awaiting approval`:"No pending bookings"})]})]})})}),e.jsx(F,{xs:24,sm:12,lg:6,children:e.jsx(Z,{hoverable:!0,style:{borderRadius:"12px"},children:e.jsxs(f,{vertical:!0,size:"small",style:{width:"100%"},children:[e.jsxs(f,{children:[e.jsx(pe,{style:{fontSize:"24px",color:"#52c41a"}}),e.jsx(U,{strong:!0,style:{fontSize:"16px"},children:"Approved"})]}),e.jsx(se,{value:n.approved,styles:{content:{color:"#52c41a",fontSize:"32px",fontWeight:"bold"}}}),e.jsxs("div",{children:[e.jsx(le,{percent:n.total>0?Math.round(n.approved/n.total*100):0,strokeColor:"#52c41a",showInfo:!1,size:"small"}),e.jsx(U,{type:"secondary",style:{fontSize:"12px"},children:n.total>0?`${Math.round(n.approved/n.total*100)}% approval rate`:"No approved bookings"})]})]})})}),e.jsx(F,{xs:24,sm:12,lg:6,children:e.jsx(Z,{hoverable:!0,style:{borderRadius:"12px"},children:e.jsxs(f,{vertical:!0,size:"small",style:{width:"100%"},children:[e.jsxs(f,{children:[e.jsx(xe,{style:{fontSize:"24px",color:"#ff4d4f"}}),e.jsx(U,{strong:!0,style:{fontSize:"16px"},children:"Rejected"})]}),e.jsx(se,{value:n.rejected,styles:{content:{color:"#ff4d4f",fontSize:"32px",fontWeight:"bold"}}}),e.jsxs("div",{children:[e.jsx(le,{percent:n.total>0?Math.round(n.rejected/n.total*100):0,strokeColor:"#ff4d4f",showInfo:!1,size:"small"}),e.jsx(U,{type:"secondary",style:{fontSize:"12px"},children:n.total>0?`${Math.round(n.rejected/n.total*100)}% rejection rate`:"No rejected bookings"})]})]})})})]}),e.jsx(Z,{children:e.jsxs(ie,{gutter:[16,16],children:[e.jsx(F,{xs:24,sm:12,md:8,children:e.jsx(fe,{placeholder:"Search by destination, purpose, vehicle...",prefix:e.jsx(be,{}),value:g,onChange:x=>b(x.target.value),allowClear:!0})}),e.jsx(F,{xs:24,sm:12,md:6,children:e.jsxs(ue,{style:{width:"100%"},placeholder:"Filter by Status",value:a.status||"",onChange:x=>j({...a,status:x}),children:[e.jsx(W,{value:"",children:"All Status"}),e.jsx(W,{value:"pending",children:e.jsx(V,{status:"warning",text:"Pending"})}),e.jsx(W,{value:"approved",children:e.jsx(V,{status:"success",text:"Approved"})}),e.jsx(W,{value:"rejected",children:e.jsx(V,{status:"error",text:"Rejected"})}),e.jsx(W,{value:"completed",children:e.jsx(V,{status:"default",text:"Completed"})})]})}),e.jsx(F,{xs:24,sm:12,md:6,children:e.jsxs(ue,{style:{width:"100%"},placeholder:"Filter by Priority",value:a.priority,onChange:x=>j({...a,priority:x}),allowClear:!0,children:[e.jsx(W,{value:"high",children:e.jsx(V,{color:"red",text:"High Priority"})}),e.jsx(W,{value:"medium",children:e.jsx(V,{color:"orange",text:"Medium Priority"})}),e.jsx(W,{value:"low",children:e.jsx(V,{color:"blue",text:"Low Priority"})})]})}),e.jsx(F,{xs:24,sm:12,md:4,children:e.jsx(L,{onClick:()=>{j({status:""}),b("")},block:!0,children:"Reset Filters"})})]})}),h?e.jsx(Z,{children:e.jsx("div",{style:{textAlign:"center",padding:"40px 0"},children:e.jsx(De,{size:"large"})})}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{bookings:K,onApprove:s,onReject:p,onViewDetails:$,canApprove:C.canApproveBookings}),e.jsx(Ke,{currentPage:O,totalItems:R.length,pageSize:m,onPageChange:oe,showSizeChanger:!0})]})]}),e.jsx(Qe,{booking:D,open:T,onClose:()=>v(!1),onApprove:s,onReject:p,canApprove:C.canApproveBookings})]}):e.jsx("div",{style:{padding:"24px"},children:e.jsx(Z,{children:e.jsx(U,{children:"You don't have permission to view bookings."})})})};export{nt as BookingsPage};
//# sourceMappingURL=BookingsPage-CnrKTYw1.js.map
