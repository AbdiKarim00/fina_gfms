import{u as k,j as e}from"./index-Bt2UjcLA.js";import{a as d,u as w,d as I}from"./react-vendor-OZCXxi_L.js";import{F as i,S as t,k as C,T as E,i as A,j as F,I as R,B}from"./antd-vendor-OtDkfd4E.js";const{Title:L,Text:s,Link:h}=E,N=()=>{var p,u,j;const[g,o]=d.useState(""),[y,m]=d.useState(!1),[T]=i.useForm(),{verifyOtp:b}=k(),r=w(),a=I(),l=(p=a.state)==null?void 0:p.userId,n=((u=a.state)==null?void 0:u.otpChannel)||"email",x=(j=a.state)==null?void 0:j.message;d.useEffect(()=>{l||r("/login")},[l,r]);const O=async S=>{var f,v;o(""),m(!0);try{await b(l,S.code,n),r("/dashboard")}catch(c){console.error("OTP verification error:",c);const z=((v=(f=c.response)==null?void 0:f.data)==null?void 0:v.message)||c.message||"Invalid OTP. Please try again.";o(z)}finally{m(!1)}},P=()=>{console.log("Resend OTP")};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4",style:{background:"linear-gradient(135deg, #E8F5E9 0%, #FFFFFF 50%, #F1F8E9 100%)"},children:e.jsxs("div",{style:{maxWidth:450,width:"100%"},children:[e.jsxs(t,{direction:"vertical",size:"large",style:{width:"100%",marginBottom:32},align:"center",children:[e.jsx("div",{style:{width:80,height:80,background:"linear-gradient(135deg, #006600 0%, #009900 100%)",borderRadius:16,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 102, 0, 0.2)"},children:e.jsx(C,{style:{fontSize:48,color:"#FFFFFF"}})}),e.jsxs(t,{direction:"vertical",size:4,align:"center",children:[e.jsx(L,{level:2,style:{margin:0,color:"#000000"},children:"Verify OTP"}),e.jsxs(s,{type:"secondary",style:{fontSize:14},children:["Enter the code sent to your ",n]})]})]}),e.jsx(A,{style:{borderRadius:16,boxShadow:"0 4px 24px rgba(0, 0, 0, 0.08)"},children:e.jsxs(t,{direction:"vertical",size:"large",style:{width:"100%"},children:[x&&e.jsx(F,{message:x,type:"success",showIcon:!0}),g&&e.jsx(F,{message:g,type:"error",showIcon:!0,closable:!0,onClose:()=>o("")}),e.jsxs(i,{form:T,name:"verify-otp",onFinish:O,layout:"vertical",size:"large",requiredMark:!1,children:[e.jsx(i.Item,{label:"OTP Code",name:"code",rules:[{required:!0,message:"Please enter the OTP code"},{len:6,message:"OTP must be 6 digits"},{pattern:/^\d+$/,message:"OTP must contain only digits"}],children:e.jsx(R,{placeholder:"000000",maxLength:6,style:{fontSize:24,textAlign:"center",letterSpacing:"0.5em",fontFamily:"monospace"},autoComplete:"one-time-code"})}),e.jsx(i.Item,{style:{marginBottom:0},children:e.jsx(B,{type:"primary",htmlType:"submit",loading:y,block:!0,size:"large",style:{height:48,fontWeight:600},children:y?"Verifying...":"Verify OTP"})})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs(t,{split:e.jsx(s,{type:"secondary",children:"•"}),children:[e.jsx(h,{onClick:P,children:"Resend OTP"}),e.jsx(h,{onClick:()=>r("/login"),children:"Back to Login"})]})})]})}),e.jsx("div",{style:{marginTop:24,textAlign:"center"},children:e.jsxs(t,{direction:"vertical",size:8,children:[e.jsxs(s,{type:"secondary",style:{fontSize:12},children:["Check your ",n==="email"?"email inbox":"phone messages"," for the OTP code"]}),n==="email"&&e.jsxs(s,{type:"secondary",style:{fontSize:12},children:["Dev Mode: ",e.jsx(h,{href:"http://localhost:8000/otp-viewer.html",target:"_blank",children:"Open OTP Viewer"})]})]})}),e.jsx("div",{style:{marginTop:24,textAlign:"center"},children:e.jsx(s,{type:"secondary",style:{fontSize:12},children:"© 2025 Kenya Government. All rights reserved."})})]})})};export{N as VerifyOtpPage};
//# sourceMappingURL=VerifyOtpPage-BCPeBlG8.js.map
