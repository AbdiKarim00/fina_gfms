{"version":3,"file":"usePermissions-CttDvXO0.js","sources":["../../src/hooks/usePermissions.ts"],"sourcesContent":["import { useAuth } from '../contexts/AuthContext';\n\nexport interface PermissionCheck {\n  canViewVehicles: boolean;\n  canCreateVehicles: boolean;\n  canEditVehicles: boolean;\n  canDeleteVehicles: boolean;\n  canEditLimitedVehicleFields: boolean;\n  canViewBookings: boolean;\n  canCreateBookings: boolean;\n  canEditBookings: boolean;\n  canDeleteBookings: boolean;\n  canApproveBookings: boolean;\n  canCancelBookings: boolean;\n  isReadOnly: boolean;\n  role: string;\n}\n\nexport const usePermissions = (): PermissionCheck => {\n  const { user } = useAuth();\n  \n  const role = user?.roles?.[0]?.toLowerCase() || '';\n  const permissions = user?.permissions || [];\n\n  // Helper function to check if user has a permission\n  const hasPermission = (permission: string): boolean => {\n    return permissions.includes(permission);\n  };\n\n  // Define vehicle permission checks\n  const canViewVehicles = hasPermission('view_vehicles');\n  const canCreateVehicles = hasPermission('create_vehicles');\n  const canEditVehicles = hasPermission('edit_vehicles');\n  const canDeleteVehicles = hasPermission('delete_vehicles');\n\n  // Transport Officer has edit permission but only for limited fields\n  const canEditLimitedVehicleFields = \n    role === 'transport officer' && canEditVehicles;\n\n  // Define booking permission checks\n  const canViewBookings = hasPermission('view_bookings');\n  const canCreateBookings = hasPermission('create_bookings');\n  const canEditBookings = hasPermission('edit_bookings');\n  const canDeleteBookings = hasPermission('delete_bookings');\n  const canApproveBookings = hasPermission('approve_bookings');\n  const canCancelBookings = hasPermission('cancel_bookings');\n\n  // Driver is read-only\n  const isReadOnly = role === 'driver';\n\n  return {\n    canViewVehicles,\n    canCreateVehicles,\n    canEditVehicles,\n    canDeleteVehicles,\n    canEditLimitedVehicleFields,\n    canViewBookings,\n    canCreateBookings,\n    canEditBookings,\n    canDeleteBookings,\n    canApproveBookings,\n    canCancelBookings,\n    isReadOnly,\n    role,\n  };\n};\n"],"names":["usePermissions","user","useAuth","role","_b","_a","permissions","hasPermission","permission","canViewVehicles","canCreateVehicles","canEditVehicles","canDeleteVehicles","canEditLimitedVehicleFields","canViewBookings","canCreateBookings","canEditBookings","canDeleteBookings","canApproveBookings","canCancelBookings"],"mappings":"wCAkBO,MAAMA,EAAiB,IAAuB,SACnD,KAAM,CAAE,KAAAC,CAAA,EAASC,EAAA,EAEXC,IAAOC,GAAAC,EAAAJ,GAAA,YAAAA,EAAM,QAAN,YAAAI,EAAc,KAAd,YAAAD,EAAkB,gBAAiB,GAC1CE,GAAcL,GAAA,YAAAA,EAAM,cAAe,CAAA,EAGnCM,EAAiBC,GACdF,EAAY,SAASE,CAAU,EAIlCC,EAAkBF,EAAc,eAAe,EAC/CG,EAAoBH,EAAc,iBAAiB,EACnDI,EAAkBJ,EAAc,eAAe,EAC/CK,EAAoBL,EAAc,iBAAiB,EAGnDM,EACJV,IAAS,qBAAuBQ,EAG5BG,EAAkBP,EAAc,eAAe,EAC/CQ,EAAoBR,EAAc,iBAAiB,EACnDS,EAAkBT,EAAc,eAAe,EAC/CU,EAAoBV,EAAc,iBAAiB,EACnDW,EAAqBX,EAAc,kBAAkB,EACrDY,EAAoBZ,EAAc,iBAAiB,EAKzD,MAAO,CACL,gBAAAE,EACA,kBAAAC,EACA,gBAAAC,EACA,kBAAAC,EACA,4BAAAC,EACA,gBAAAC,EACA,kBAAAC,EACA,gBAAAC,EACA,kBAAAC,EACA,mBAAAC,EACA,kBAAAC,EACA,WAdiBhB,IAAS,SAe1B,KAAAA,CAAA,CAEJ"}